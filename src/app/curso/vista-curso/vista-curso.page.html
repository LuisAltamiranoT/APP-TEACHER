<ion-header>
  <ion-toolbar>
  </ion-toolbar>
</ion-header>
<ion-content *ngIf="validateScanner else barra">
  <ion-grid>
    <ion-row class="ion-justify-content-center">
      <ion-col col-6 class="ion-align-self-center">
        <h3 class="font-weight-normal">
          <ion-icon name="list-outline" class="fa-nival-bottom" style="padding-right: 3px;"></ion-icon>{{NombreMateria}}
        </h3>
      </ion-col>
      <ion-col col-6>
        <h3 style="float: right;">
          <a style="float: right; text-decoration: none; color: black;" (click)='verOpciones()'>
            <ion-icon class="fa-nival" name="options-outline" style="padding-right: 3px;">
            </ion-icon>Opciones
          </a>
        </h3>
      </ion-col>
    </ion-row>
    <hr class="hr-nival" style="margin-top: -0.4rem;">
    <ion-row *ngIf="activarOpciones">
      <ion-col>
        <button mat-button [disabled]="networkStatus && networkStatus.connected ? 'false':'true'" (click)="QR()"
          class="fullNivalWidth ion-text-left">
          <ion-icon class="fa-nival-bottom" name="qr-code-outline"></ion-icon>
          Generar QR
        </button>
      </ion-col>
      <ion-col size="12">
        <button mat-button  [disabled]='validateReporte' (click)="openVistaAnterior()" class="fullNivalWidth ion-text-left">
          <ion-icon class="fa-nival-bottom" name="search-outline"></ion-icon>
          {{seleccionBusqueda}}
        </button>
      </ion-col>

      <ion-col size="12" *ngIf="validateSeleccionHistorial">
        <a mat-button (click)="replaceVistaTrue()" class="fullNivalWidth ion-text-left">
          <ion-icon class="fa-nival-bottom" name="refresh-outline"></ion-icon>
          Asistencia Actual
        </a>
      </ion-col>

      <ion-col size="12">
        <button [disabled]="networkStatus && networkStatus.connected ? 'false':'true'" mat-button (click)="changeState()" class="fullNivalWidth ion-text-left">
          <ion-icon class="fa-nival-bottom" name="settings-outline"></ion-icon>
          Estado {{estado | titlecase}}
        </button>
      </ion-col>

      <ion-col size='12'>
        <button mat-button (click)="almacenarNominaFinalizado()" [disabled]='validateGuardarInformacion'
          class="fullNivalWidth ion-text-left">
          <ion-icon class="fa-nival-bottom" name="save-outline"></ion-icon>
          Guardar Asistencia
        </button>
      </ion-col>
      <ion-col size='12'>
        <button mat-button (click)='onReportes()'  [disabled]='validateReporte' class="fullNivalWidth ion-text-left">
          <ion-icon class="fa-nival-bottom" name="reader-outline"></ion-icon>
          Reportes
        </button>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <mat-form-field class="input-modal">
          <mat-label>Buscar</mat-label>
          <input matInput autocomplete="off" (keyup)="applyFilter($event)" placeholder="Ejemplo 201720 o Pepito Perez"
            #input>
          <mat-icon matSuffix (click)="limpiarBusqueda(input)">backspace</mat-icon>
        </mat-form-field>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-12 col-sm-12>
        <div class="example-container mat-elevation-z3">
          <table mat-table [dataSource]="dataSource" #tabla1>

            <!-- Numero de fila -->
            <ng-container matColumnDef="fila">
              <th mat-header-cell *matHeaderCellDef> N° </th>
              <td mat-cell *matCellDef="let element ,let i = index;"> {{i+1}}
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="codigoUnico">
              <th mat-header-cell *matHeaderCellDef> Codigo único </th>
              <td mat-cell *matCellDef="let element"> {{element.codigoUnico}}
              </td>
            </ng-container>

            <!-- image colunm -->
            <ng-container matColumnDef="image">
              <th mat-header-cell *matHeaderCellDef> Imagen </th>
              <td class="px-1" mat-cell *matCellDef="let element, let i = index;">
                <a (click)='openPhoto(element.image)'>
                  <mat-card class="mat-elevation-z0">
                    <div mat-card-avatar [style.background-image]="'url('+img+')'" class="avatarDiv">
                      <div mat-card-avatar [style.background-image]="'url('+element.image+')'" class="avatarDiv">
                      </div>
                    </div>
                  </mat-card>
                </a>
              </td>
            </ng-container>


            <!-- Name Column -->
            <ng-container matColumnDef="nombre" sticky>
              <th class="nombre" mat-header-cell *matHeaderCellDef> Nombre </th>
              <td class="td-left" *matCellDef="let element, let l = index;">
                <h5>
                  {{element.nombre}}
                </h5>
              </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="presente">
              <th mat-header-cell *matHeaderCellDef> Presente </th>
              <td class="px-1" mat-cell *matCellDef="let element, let p = index;">
                <mat-checkbox [checked]=element.presente [disabled]=element.presente
                  (change)="showOptionsPresente($event, p,element.correo)"></mat-checkbox>
              </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="atraso">
              <th mat-header-cell *matHeaderCellDef> Atraso </th>
              <td class="px-1" mat-cell *matCellDef="let element, let a = index;">
                <mat-checkbox [checked]=element.atraso [disabled]=element.atraso
                  (change)="showOptionsAtraso($event, a,element.correo)"></mat-checkbox>
              </td>
            </ng-container>
            <ng-container matColumnDef="falta">
              <th mat-header-cell *matHeaderCellDef> Falta </th>
              <td class="px-1" mat-cell *matCellDef="let element, let f = index;">
                <mat-checkbox [checked]=element.falta [disabled]=element.falta (change)="showOptionsFalta($event, f,element.correo)">
                </mat-checkbox>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="5">No se ha encontrado: "{{input.value}}"</td>
            </tr>
          </table>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>


<ion-footer>
  <ion-toolbar>
  </ion-toolbar>
</ion-footer>

