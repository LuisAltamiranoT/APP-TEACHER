<ion-header>
  <ion-toolbar>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <h3 class="font-weight-normal">
          <mat-icon class="fa-nival" matSuffix>description</mat-icon> Reporte de Asistencia
        </h3>
      </ion-col>
      <ion-col size="12">
        <hr class="hr-nival">
      </ion-col>
      <ion-col size="12">
        <h4 class="font-weight-normal">
          <mat-checkbox [checked]="activar" (change)="presentarCalendario($event.checked)" class="fa-nival">
          </mat-checkbox>
          <ion-icon name="filter-outline" class="fa-nival" style="padding-left: 4px;"></ion-icon>
          Periodo de Asistencia:
        </h4>
      </ion-col>
      <ion-col size="12">
        <h4 class="font-weight-normal">
          <a class="float-right" style="text-decoration: none;"
            [routerLink]="['/reporte-general', dataId, fecha_inicio, fecha_fin]">
            <ion-icon name="document-outline" class="pr-1 fa-nival"></ion-icon>Ver Reporte General
          </a>
        </h4>
      </ion-col>
      <ion-col size="12" *ngIf="verCalendario">
        <form [formGroup]="anioForm">
          <ion-row>
            <ion-col size="6">
              <mat-form-field class="input-modal">
                <mat-label>Inicio</mat-label>
                <input autocomplete="off" matInput [matDatepickerFilter]="myFilter" [matDatepicker]="picker"
                  formControlName="inicio" readonly>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
            </ion-col>
            <ion-col size="6">
              <mat-form-field class="input-modal">
                <mat-label>Final</mat-label>
                <input autocomplete="off" matInput [matDatepickerFilter]="myFilter" [matDatepicker]="picker1"
                  formControlName="fin" readonly (dateInput)="validarFecha($event, anioForm.value )">
                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                <mat-datepicker #picker1></mat-datepicker>
              </mat-form-field>
            </ion-col>
          </ion-row>
        </form>
      </ion-col>
      <ion-col size="12">
        <div class="example-container mat-elevation-z3">
          <mat-form-field class="busqueda1">
            <mat-label>Buscar</mat-label>
            <input matInput autocomplete="off" (keyup)="applyFilter($event)" placeholder="Ejemplo 201720 o Pepito Perez"
              #input>
          </mat-form-field>
          <table mat-table [dataSource]="dataSource" #tabla1>

            <!-- Numero de fila -->
            <ng-container matColumnDef="fila">
              <th mat-header-cell *matHeaderCellDef> N° </th>
              <td mat-cell *matCellDef="let element ,let i = index;"> {{i+1}}
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="codigoUnico">
              <th mat-header-cell *matHeaderCellDef> Codigo único </th>
              <td mat-cell *matCellDef="let element"> {{element.codigoUnico}}
              </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef> Nombre </th>
              <td class="px-1" mat-cell *matCellDef="let element, let l = index;">

                <h4 style="text-align: left;">
                  <p class="rounded p-1 mt-2">
                    {{element.nombre}}
                  </p>
                </h4>
              </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="reporte">
              <th mat-header-cell *matHeaderCellDef> Generar Reporte </th>
              <td class="px-1" mat-cell *matCellDef="let element, let p = index;">
                <a class="text-center"
                  [routerLink]="['/reporte-individual', dataId, element.nombre, fecha_inicio, fecha_fin]">
                  <mat-icon class="pr-1 fa-nival">insert_drive_file</mat-icon>
                </a>
              </td>
            </ng-container>

            <!-- Symbol Column -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="5">No se ha encontrado: "{{input.value}}"</td>
            </tr>
          </table>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>

<ion-footer>
  <ion-toolbar>
  </ion-toolbar>
</ion-footer>